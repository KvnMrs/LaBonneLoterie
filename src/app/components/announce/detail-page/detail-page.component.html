<div *ngIf="currentAnnounce && authorAnnounce" class="main-container">
  <lbl-header>D√©tails de l'annonce</lbl-header>
  <!-- Details container -->
  <div class="details-container-1">
    <!-- Left part desktop -->
    <div class="details-container-2">
      <!-- carousel-->
      <aside class="carousel-container">
        <img
          *ngFor="let imgUrl of currentAnnounce.imgsAnnounce"
          [src]="imgUrl"
          class="rounded-box carousel-item object-fill w-full"
        />
      </aside>
      <!-- Announce infos -->
      <div class="announce-info-container">
        <div class="category-price-line md:w-1/2">
          <h2 class="text-2xl">{{ currentAnnounce.category }}</h2>
          <span class="text-2xl font-semibold">{{
            currentAnnounce.ticketPrice | currency : "EUR"
          }}</span>
        </div>
        <div class="mb-3">
          <h3 class="text-xl mb-2">{{ currentAnnounce.title }}</h3>
          <p>
            Post√© le
            {{ currentAnnounce.createdAt | date : "dd/MM/yyyy" }}
          </p>
        </div>
        <!-- Badges -->
        <div class="flex mb-3">
          <div class="announce-badges mr-1">neutral</div>
          <div class="announce-badges mx-1">neutral</div>
          <div class="announce-badges mx-1">neutral</div>
          <div class="announce-badges ml-1">neutral</div>
        </div>
        <div class="divider lg:mb-8"></div>
        <!-- Description -->
        <div class="announce-description-container">
          <h3 class="card-title mb-2">Description:</h3>
          <p class="text-gray-800 leading-normal">
            {{ currentAnnounce.description }}
          </p>
        </div>
      </div>
      <!-- Right part desktop -->
      <div class="details-container-2">
        <!-- User & stats infos  -->
        <div class="announce-user-stats-container">
          <!-- Statistics -->
          <div class="announce-statistics-info">
            <div class="announce-titles-divider">
              <h3 class="section-title">Statistiques</h3>
            </div>
            <div class="announce-statistics-lines">
              <p class="font-mono">Estimation</p>
              <p class="font-mono">{{ currentAnnounce.estimate }}</p>
            </div>
            <div class="announce-statistics-lines">
              <p class="font-mono">Prix pour 1 ticket</p>
              <p class="font-mono">{{ currentAnnounce.ticketPrice }}</p>
            </div>
            <div class="announce-statistics-lines">
              <p class="font-mono">Nb Ticket maximum</p>
              <p class="font-mono">{{ currentAnnounce.maxTickets }}</p>
            </div>
            <div class="announce-statistics-lines">
              <p class="font-mono">Nb Ticket en cours</p>
              <p class="font-mono">{{ currentAnnounce.currentTickets }}</p>
            </div>
            <div class="announce-statistics-lines">
              <p class="font-mono">Nombre d'acheteurs</p>
              <p class="font-mono">32</p>
            </div>
            <div class="announce-statistics-lines">
              <p class="font-mono">Durant la derni√®re heure</p>
              <p class="font-mono">500</p>
            </div>
          </div>
          <!-- Timer -->
          <app-timer [endDate]="currentAnnounce.endAt"></app-timer>
        </div>
      </div>
    </div>
    <!-- User -->
    <div class="announce-user-stats-container border border-slate-300">
      <div class="announce-user-profile">
        <img
          class="w-24 mask mask-squircle"
          [src]="authorAnnounce['imgProfile']"
        />
        <div class="announce-user-info">
          <p class="text-gray-800 font-bold text-xl sm:text-2xl">
            {{ authorAnnounce["firstname"] }}
            {{ authorAnnounce["lastname"] }}
          </p>
          <div class="rating rating-md">
            <input
              type="radio"
              name="rating-9"
              class="mr-0.5 mask mask-star-2 bg-yellow-300"
            />
            <input
              type="radio"
              name="rating-9"
              class="mx-0.5 mask mask-star-2 bg-yellow-300"
              checked
            />
            <input
              type="radio"
              name="rating-9"
              class="mx-0.5 mask mask-star-2 bg-primary"
            />
            <input
              type="radio"
              name="rating-9"
              class="mx-0.5 mask mask-star-2 bg-primary"
            />
            <input
              type="radio"
              name="rating-9"
              class="mx-0.5 mask mask-star-2 bg-primary"
            />
          </div>
          <a class="link text-blue-500">Voir les 29 annonces</a>
        </div>
      </div>
    </div>
    <div class="btn-group flex justify-center gap-0.5">
      <button class="ml-auto btn btn-info btn-sm btn-outline">Contacter</button>
      <button class="btn btn-primary btn-sm">acheter</button>
    </div>
  </div>
</div>

<!-- Buy ticket modal -->
<input
  type="checkbox"
  #modalBuyTicket
  id="modalBuyTicket"
  class="modal-toggle"
/>
<div class="modal">
  <div class="modal-box flex flex-col gap-4">
    <label
      for="modalBuyTicket"
      class="btn btn-sm btn-circle absolute right-4 top-4"
      >‚úï</label
    >
    <h3 class="font-bold text-lg">
      Achat de ticket(s) pour 'clio 3 bon √©tat'.
    </h3>
    <div class="w-full flex flex-col my-3 gap-2">
      <label for="buyTickets">Selectionner un nombre de ticket:</label>
      <input
        id="numberTicket"
        type="number"
        class="input-lbl w-1/3 border-2 bg-base-200"
      />
    </div>
    <table class="w-full py-4">
      <tbody>
        <tr class="flex justify-between">
          <th colspan="2" scope="row" class="font-normal">
            Nombre de tickets s√©lectionn√©s:
          </th>
          <td class="font-medium">22</td>
        </tr>
        <tr class="flex justify-between">
          <th colspan="2" scope="row" class="font-normal">Nombre de chances</th>
          <td class="font-medium">1/5</td>
        </tr>
        <tr class="flex justify-between">
          <th colspan="2" scope="row" class="font-normal">Prix total:</th>
          <td class="font-medium">54 $</td>
        </tr>
      </tbody>
    </table>
    <div class="modal-action">
      <label for="modalBuyTicket" class="btn btn-outline btn-info"
        >Annuler</label
      >
      <label
        for="modal-good-luck"
        class="btn btn-primary"
        (click)="closeModal()"
        >Valider</label
      >
    </div>
  </div>
</div>

<!-- Good luck modal -->
<input type="checkbox" id="modal-good-luck" class="modal-toggle" />
<div class="modal">
  <div class="modal-box flex flex-col gap-4">
    <label
      for="modal-good-luck"
      class="btn btn-sm btn-circle absolute right-4 top-4"
      >‚úï</label
    >
    <h3 class="pb-4 font-bold text-3xl text-primary text-lbl">
      La bonne chance ü§û
    </h3>
    <p class="pb-2">
      [Nom utilisateur], nous vous souhaitons bonne chance pour ce tirage ce
      tirage √† venir !
    </p>
    <p class="pb-2">
      N'h√©sitez pas √† nous contacter si vous avez des questions ou des
      pr√©occupations concernant votre annonce. Nous sommes l√† pour vous aider.
    </p>
    <div class="modal-action">
      <label for="modal-good-luck" class="btn btn-primary">Merci</label>
    </div>
  </div>
</div>
